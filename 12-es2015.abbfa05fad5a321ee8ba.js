(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{XpXM:function(t,e,i){"use strict";i.r(e),i.d(e,"MainPageModule",(function(){return m}));var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),c=i("tyNb"),a=i("mrSG"),s=i("tk/3"),l=i("z6cu"),d=i("JIr8"),b=i("fXoL");function p(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-button",5),b.Sb("click",(function(){return b.bc(t),b.Ub().reload()})),b.fc(1,"\u91cd\u65b0\u8f09\u5165"),b.Jb()}}function f(t,e){if(1&t){const t=b.Lb();b.Kb(0,"ion-item",6),b.Kb(1,"ion-label",7),b.Sb("click",(function(){b.bc(t);const i=e.$implicit;return b.Ub().nav2update(i.id)})),b.Kb(2,"span"),b.fc(3),b.Jb(),b.Ib(4,"br"),b.Kb(5,"span",8),b.fc(6),b.Jb(),b.Kb(7,"span",9),b.Ib(8,"br"),b.fc(9),b.Jb(),b.Jb(),b.Kb(10,"span",10),b.fc(11),b.Vb(12,"date"),b.Jb(),b.Kb(13,"ion-button",11),b.Sb("click",(function(){b.bc(t);const i=e.$implicit;return b.Ub().DeleteItem(i.id)})),b.fc(14,"delete"),b.Jb(),b.Jb()}if(2&t){const t=e.$implicit;b.xb(3),b.gc(" ",t.id,". "),b.xb(3),b.gc(" Title\uff1a ",t.title," "),b.xb(3),b.gc(" description\uff1a ",t.description," "),b.xb(2),b.gc(" \u6700\u5f8c\u4fee\u6539\u6642\u9593\uff1a ",b.Wb(12,4,t.updated_at,"short")," ")}}const u=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.navCtrl=t,this.http=e,this.alertController=i,this.ToastCtr=n,this.rawResponse=null,this.errorFlag=!1,this.handleError=t=>(t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`HTTP status code ${t.status}, reason:`,t.error),Object(l.a)("Something bad happened; please try again later."))}ngOnInit(){this.initialize()}initialize(){return Object(a.a)(this,void 0,void 0,(function*(){try{const t=yield this.getAllNotificationsFromApi();console.log(t.data),this.data=t.data,this.rawResponse=t}catch(t){console.error(t),this.errorFlag=!0,Object(d.a)(this.handleError),this.presentErrorAlert()}}))}getAllNotificationsFromApi(){return Object(a.a)(this,void 0,void 0,(function*(){return yield this.http.get("https://api.next.cocoing.info/admin/notifications").toPromise()}))}presentErrorAlert(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"\u767c\u751f\u932f\u8aa4",message:"\u8f09\u5165\u5931\u6557\uff0c\u8acb\u91cd\u65b0\u8f09\u5165",buttons:["OK"]})).present()}))}reload(){this.initialize()}DeleteItem(t){return Object(a.a)(this,void 0,void 0,(function*(){try{const e=yield this.DeleteNotificationsFromApi(t);console.log({response:e})}catch(e){console.error("catch error!"),Object(d.a)(this.handleError)}}))}DeleteNotificationsFromApi(t){return Object(a.a)(this,void 0,void 0,(function*(){return new Promise((e,i)=>{const n={id:t},o={headers:new s.c({"X-HTTP-Method-Override":"delete"})};this.http.post("https://api.next.cocoing.info/admin/notifications",n,o).subscribe(t=>{console.log(t),this.presentDeleteAlert(),this.reload(),e(t)},t=>{console.error(t),this.presentFailDeleteAlert(),i(t)})})}))}presentDeleteAlert(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"\u522a\u9664\u6210\u529f",message:"\u8cc7\u6599\u5df2\u522a\u9664\u6210\u529f",buttons:["OK"]})).present()}))}presentFailDeleteAlert(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"\u522a\u9664\u5931\u6557",message:"\u8cc7\u6599\u522a\u9664\u5931\u6557",buttons:["OK"]})).present()}))}add_notification(){this.navCtrl.navigateForward("/add-notification",{state:()=>{this.initialize()}})}nav2update(t){this.navCtrl.navigateForward("/item-update/"+t,{state:()=>{this.reload()}})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(r.t),b.Hb(s.a),b.Hb(r.a),b.Hb(r.w))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-main"]],decls:10,vars:2,consts:[["color","dark"],["color","dark",1,"my_title"],["expand","full",3,"click"],["expand","full","color","danger",3,"click",4,"ngIf"],["class","item",4,"ngFor","ngForOf"],["expand","full","color","danger",3,"click"],[1,"item"],[3,"click"],[1,"myitemtitle"],[1,"myitemdes"],[1,"my_date"],["slot","end","color","danger",3,"click"]],template:function(t,e){1&t&&(b.Kb(0,"ion-header"),b.Kb(1,"ion-toolbar",0),b.Kb(2,"ion-title",1),b.fc(3,"\u4e3b\u8981\u9801\u9762"),b.Jb(),b.Jb(),b.Jb(),b.Kb(4,"ion-content"),b.Kb(5,"ion-button",2),b.Sb("click",(function(){return e.add_notification()})),b.fc(6,"\u65b0\u589e\u901a\u77e5"),b.Jb(),b.ec(7,p,2,0,"ion-button",3),b.Kb(8,"ion-list"),b.ec(9,f,15,7,"ion-item",4),b.Jb(),b.Jb()),2&t&&(b.xb(7),b.Zb("ngIf",e.errorFlag),b.xb(2),b.Zb("ngForOf",e.data))},directives:[r.h,r.q,r.p,r.g,r.e,n.j,r.m,n.i,r.k,r.l],pipes:[n.d],styles:['@charset "UTF-8";*[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:\u5fae\u8edf\u6b63\u9ed1\u9ad4}.my_title[_ngcontent-%COMP%]{font-size:25px;margin-left:46.5%;margin-right:45%;padding:10px;color:#fff}.item[_ngcontent-%COMP%]{position:relative}.myid[_ngcontent-%COMP%]{left:0;top:0;color:#fff;background:#3ea1fd;font-size:16px;text-align:center;margin-bottom:15px}.myid[_ngcontent-%COMP%], .myitemtitle[_ngcontent-%COMP%]{position:absolute;padding:5px}.myitemtitle[_ngcontent-%COMP%]{left:40px;top:5px;font-weight:bolder;font-size:18px}.my_date[_ngcontent-%COMP%]{position:absolute;right:100px;font-size:14px;color:grey}@media (max-width:1213px){.my_title[_ngcontent-%COMP%]{font-size:25px;margin-left:35%}}']}),t})()}];let h=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(u)],c.i]}),t})(),m=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[n.b,o.a,r.r,h]]}),t})()}}]);