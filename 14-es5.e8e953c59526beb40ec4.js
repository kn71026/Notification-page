!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{X3zk:function(t,r,o){"use strict";o.r(r),o.d(r,"LoginPageModule",(function(){return M}));var i,a,s,c=o("ofXK"),u=o("3Pt+"),b=o("TEn/"),l=o("tyNb"),d=o("mrSG"),p=o("z6cu"),h=o("JIr8"),g=o("fXoL"),f=o("tk/3"),m=o("e8h1"),v=[{path:"",component:(i=function(){function t(n,r,o,i){e(this,t),this.navCtrl=n,this.http=r,this.alertCtrl=o,this.storage=i,this.email="",this.password="",this.remember=!1,this.handleError=function(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error("HTTP status code ".concat(e.status,", reason:"),e.error),Object(p.a)("Something bad happened; please try again later.")}}var r,o,i;return r=t,(o=[{key:"ngOnInit",value:function(){}},{key:"login",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.postFromApi();case 3:return n=e.sent,this.user=n.data.user.name,this.token=n.data.token.access_token,console.log(this.user),e.next=9,this.storage.set("User",this.user);case 9:return e.next=11,this.storage.set("Token",this.token);case 11:this.navCtrl.navigateForward("/main"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("catch error!"),Object(h.a)(this.handleError);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})))}},{key:"postFromApi",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.http.post("https://api.cocoing.info/v1/login",{email:n.email,password:n.password}).subscribe((function(t){n.data=t.body,console.log(t),e(t)}),(function(e){console.error(e),n.presentAlert1(),t(e)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"SignIn",value:function(){this.presentAlert2()}},{key:"presentAlert1",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"ERROR",subHeader:"login failed",message:"\u5e33\u865f\u5bc6\u78bc\u932f\u8aa4",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onDidDismiss();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"presentAlert2",value:function(){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertCtrl.create({header:"ERROR",subHeader:"signIn failed",message:"\u9084\u6c92\u5bebQQ",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onDidDismiss();case 7:case"end":return e.stop()}}),e,this)})))}}])&&n(r.prototype,o),i&&n(r,i),t}(),i.\u0275fac=function(e){return new(e||i)(g.Hb(b.x),g.Hb(f.a),g.Hb(b.a),g.Hb(m.b))},i.\u0275cmp=g.Bb({type:i,selectors:[["app-login"]],decls:26,vars:3,consts:[[1,"header"],[1,"ion-text-center"],["position","floating"],["type","text","required","",3,"ngModel","ngModelChange"],["type","password","required","",3,"ngModel","ngModelChange"],["color","primary","checked","","slot","start",3,"ngModel","ngModelChange"],[3,"click"]],template:function(e,n){1&e&&(g.Mb(0,"ion-app"),g.Mb(1,"ion-header"),g.Mb(2,"ion-toolbar"),g.Mb(3,"ion-title"),g.kc(4,"Login"),g.Lb(),g.Lb(),g.Lb(),g.Ib(5,"div",0),g.Mb(6,"ion-grid"),g.Mb(7,"ion-col"),g.Mb(8,"div",1),g.Mb(9,"ion-item"),g.Mb(10,"ion-label",2),g.kc(11,"\u5e33\u865f\uff1a"),g.Lb(),g.Mb(12,"ion-input",3),g.Ub("ngModelChange",(function(e){return n.email=e})),g.Lb(),g.Lb(),g.Mb(13,"ion-item"),g.Mb(14,"ion-label",2),g.kc(15,"\u5bc6\u78bc\uff1a"),g.Lb(),g.Mb(16,"ion-input",4),g.Ub("ngModelChange",(function(e){return n.password=e})),g.Lb(),g.Lb(),g.Mb(17,"ion-item"),g.Mb(18,"ion-label"),g.kc(19,"Remember me"),g.Lb(),g.Mb(20,"ion-checkbox",5),g.Ub("ngModelChange",(function(e){return n.remember=e})),g.Lb(),g.Lb(),g.Ib(21,"br"),g.Mb(22,"ion-button",6),g.Ub("click",(function(){return n.login()})),g.kc(23,"login"),g.Lb(),g.Mb(24,"ion-button",6),g.Ub("click",(function(){return n.SignIn()})),g.kc(25,"SignIn"),g.Lb(),g.Lb(),g.Lb(),g.Lb(),g.Lb()),2&e&&(g.xb(12),g.ec("ngModel",n.email),g.xb(4),g.ec("ngModel",n.password),g.xb(4),g.ec("ngModel",n.remember))},directives:[b.c,b.l,b.u,b.t,b.k,b.i,b.o,b.p,b.n,b.z,u.f,u.d,u.e,b.h,b.b,b.f],styles:[".header[_ngcontent-%COMP%]{background-color:#50c8ff;height:200px;position:relative;background-position:0;z-index:-1}.ion-text-center[_ngcontent-%COMP%]{position:absolute;background-color:#fff;top:-50px;right:-100px;border:1 solid;border-radius:10px;box-shadow:0 0 9px grey;padding:40px;margin-top:25%;z-index:100}"]}),i)}],k=((s=function n(){e(this,n)}).\u0275mod=g.Fb({type:s}),s.\u0275inj=g.Eb({factory:function(e){return new(e||s)},imports:[[l.i.forChild(v)],l.i]}),s),M=((a=function n(){e(this,n)}).\u0275mod=g.Fb({type:a}),a.\u0275inj=g.Eb({factory:function(e){return new(e||a)},imports:[[c.c,u.a,b.v,k]]}),a)}}])}();