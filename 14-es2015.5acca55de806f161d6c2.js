(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{X3zk:function(e,t,o){"use strict";o.r(t),o.d(t,"LoginPageModule",(function(){return g}));var n=o("ofXK"),r=o("3Pt+"),i=o("TEn/"),s=o("tyNb"),a=o("mrSG"),b=o("z6cu"),c=o("JIr8"),l=o("fXoL"),d=o("tk/3"),h=o("e8h1");const p=[{path:"",component:(()=>{class e{constructor(e,t,o,n){this.navCtrl=e,this.http=t,this.alertCtrl=o,this.storage=n,this.email="",this.password="",this.remember=!1,this.handleError=e=>(e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`HTTP status code ${e.status}, reason:`,e.error),Object(b.a)("Something bad happened; please try again later."))}ngOnInit(){}login(){return Object(a.a)(this,void 0,void 0,(function*(){try{let e;e=yield this.postFromApi(),console.log({response:e}),this.user=e.data.user.name,this.token=e.data.token.access_token,console.log(this.user),console.log(this.token),yield this.storage.set("User",this.user),yield this.storage.set("Token",this.token),this.navCtrl.navigateForward("/main")}catch(e){console.error("catch error!"),Object(c.a)(this.handleError)}}))}postFromApi(){return Object(a.a)(this,void 0,void 0,(function*(){return new Promise((e,t)=>{this.http.post("https://api.cocoing.info/v1/login",{email:this.email,password:this.password}).subscribe(t=>{this.data=t.body,console.log(t),e(t)},e=>{console.error(e),this.presentAlert1(),t(e)})})}))}SignIn(){this.presentAlert2()}presentAlert1(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({header:"ERROR",subHeader:"login failed",message:"\u5e33\u865f\u5bc6\u78bc\u932f\u8aa4",buttons:["OK"]});yield e.present(),yield e.onDidDismiss()}))}presentAlert2(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertCtrl.create({header:"ERROR",subHeader:"signIn failed",message:"\u9084\u6c92\u5bebQQ",buttons:["OK"]});yield e.present(),yield e.onDidDismiss()}))}}return e.\u0275fac=function(t){return new(t||e)(l.Hb(i.x),l.Hb(d.a),l.Hb(i.a),l.Hb(h.b))},e.\u0275cmp=l.Bb({type:e,selectors:[["app-login"]],decls:26,vars:3,consts:[[1,"header"],[1,"ion-text-center"],["position","floating"],["type","text","required","",3,"ngModel","ngModelChange"],["type","password","required","",3,"ngModel","ngModelChange"],["color","primary","checked","","slot","start",3,"ngModel","ngModelChange"],[3,"click"]],template:function(e,t){1&e&&(l.Kb(0,"ion-app"),l.Kb(1,"ion-header"),l.Kb(2,"ion-toolbar"),l.Kb(3,"ion-title"),l.hc(4,"Login"),l.Jb(),l.Jb(),l.Jb(),l.Ib(5,"div",0),l.Kb(6,"ion-grid"),l.Kb(7,"ion-col"),l.Kb(8,"div",1),l.Kb(9,"ion-item"),l.Kb(10,"ion-label",2),l.hc(11,"\u5e33\u865f\uff1a"),l.Jb(),l.Kb(12,"ion-input",3),l.Sb("ngModelChange",(function(e){return t.email=e})),l.Jb(),l.Jb(),l.Kb(13,"ion-item"),l.Kb(14,"ion-label",2),l.hc(15,"\u5bc6\u78bc\uff1a"),l.Jb(),l.Kb(16,"ion-input",4),l.Sb("ngModelChange",(function(e){return t.password=e})),l.Jb(),l.Jb(),l.Kb(17,"ion-item"),l.Kb(18,"ion-label"),l.hc(19,"Remember me"),l.Jb(),l.Kb(20,"ion-checkbox",5),l.Sb("ngModelChange",(function(e){return t.remember=e})),l.Jb(),l.Jb(),l.Ib(21,"br"),l.Kb(22,"ion-button",6),l.Sb("click",(function(){return t.login()})),l.hc(23,"login"),l.Jb(),l.Kb(24,"ion-button",6),l.Sb("click",(function(){return t.SignIn()})),l.hc(25,"SignIn"),l.Jb(),l.Jb(),l.Jb(),l.Jb(),l.Jb()),2&e&&(l.xb(12),l.bc("ngModel",t.email),l.xb(4),l.bc("ngModel",t.password),l.xb(4),l.bc("ngModel",t.remember))},directives:[i.c,i.l,i.u,i.t,i.k,i.i,i.o,i.p,i.n,i.z,r.f,r.d,r.e,i.h,i.b,i.f],styles:[".header[_ngcontent-%COMP%]{background-color:#50c8ff;height:200px;position:relative;background-position:0;z-index:-1}.ion-text-center[_ngcontent-%COMP%]{position:absolute;background-color:#fff;top:-50px;right:-100px;border:1 solid;border-radius:10px;box-shadow:0 0 9px grey;padding:40px;margin-top:25%;z-index:100}"]}),e})()}];let u=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[s.i.forChild(p)],s.i]}),e})(),g=(()=>{class e{}return e.\u0275mod=l.Fb({type:e}),e.\u0275inj=l.Eb({factory:function(t){return new(t||e)},imports:[[n.b,r.a,i.v,u]]}),e})()}}]);