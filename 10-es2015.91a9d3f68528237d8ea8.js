(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"Z45+":function(t,e,o){"use strict";o.r(e),o.d(e,"AddNotificationPageModule",(function(){return f}));var n=o("ofXK"),r=o("3Pt+"),i=o("TEn/"),s=o("tyNb"),a=o("mrSG"),c=o("tk/3"),b=o("z6cu"),l=o("JIr8"),d=o("fXoL"),u=o("e8h1");const h=[{path:"",component:(()=>{class t{constructor(t,e,o,n,r){this.navCtrl=t,this.alertController=e,this.http=o,this.router=n,this.storage=r,this.rawResponse=null,this.accessToken="",this.body={title:"",description:""},this.handleError=t=>(t.error instanceof ErrorEvent?console.error("An error occurred:",t.error.message):console.error(`HTTP status code ${t.status}, reason:`,t.error),Object(b.a)("Something bad happened; please try again later.")),this.router.getCurrentNavigation().extras.state&&(this.callback=this.router.getCurrentNavigation().extras.state)}ngOnInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.accessToken=String(yield this.storage.get("Token"))}))}close(){this.navCtrl.navigateBack("/main")}addItem(){return Object(a.a)(this,void 0,void 0,(function*(){try{const t=yield this.PostNewNotificationsToApi();console.log({response:t})}catch(t){console.error("catch error!"),Object(l.a)(this.handleError)}}))}PostNewNotificationsToApi(){return Object(a.a)(this,void 0,void 0,(function*(){return new Promise((t,e)=>{const o={headers:new c.c({Authorization:"Bearer "+this.accessToken})};this.http.post("https://api.next.cocoing.info/admin/notifications",this.body,o).subscribe(e=>{console.log(e),this.callback(),this.presentAddAlert(),this.close(),t(e)},t=>{console.error(t),this.presentAddFailAlert(),e(t)})})}))}presentAddAlert(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"\u65b0\u589e\u6210\u529f",message:"\u65b0\u589e\u901a\u77e5\u6210\u529f!",buttons:["OK"]})).present()}))}presentAddFailAlert(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.alertController.create({header:"\u65b0\u589e\u5931\u6557",message:"\u65b0\u589e\u901a\u77e5\u5931\u6557!",buttons:["OK"]})).present()}))}}return t.\u0275fac=function(e){return new(e||t)(d.Hb(i.x),d.Hb(i.a),d.Hb(c.a),d.Hb(s.g),d.Hb(u.b))},t.\u0275cmp=d.Bb({type:t,selectors:[["app-add-notification"]],decls:20,vars:2,consts:[["color","dark"],["slot","start"],["slot","end",1,"mybutton"],[3,"click"],["slot","icon-only","name","close"],["color","primary","position","floating"],["type","text","required","",3,"ngModel","ngModelChange"],["rows","6","cols","20","placeholder","Enter any text here...","required","",3,"ngModel","ngModelChange"],["expand","block","type","submit",1,"submit-btn",3,"click"]],template:function(t,e){1&t&&(d.Kb(0,"ion-header"),d.Kb(1,"ion-toolbar",0),d.Kb(2,"ion-title"),d.fc(3,"add-notification"),d.Jb(),d.Kb(4,"ion-buttons",1),d.Ib(5,"ion-back-button"),d.Jb(),d.Kb(6,"ion-buttons",2),d.Kb(7,"ion-button",3),d.Sb("click",(function(){return e.close()})),d.Ib(8,"ion-icon",4),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.Kb(9,"ion-content"),d.Kb(10,"ion-item"),d.Kb(11,"ion-label",5),d.fc(12,"Title"),d.Jb(),d.Kb(13,"ion-input",6),d.Sb("ngModelChange",(function(t){return e.body.title=t})),d.Jb(),d.Jb(),d.Kb(14,"ion-item"),d.Kb(15,"ion-label",5),d.fc(16,"Description"),d.Jb(),d.Kb(17,"ion-textarea",7),d.Sb("ngModelChange",(function(t){return e.body.description=t})),d.Jb(),d.Jb(),d.Kb(18,"ion-button",8),d.Sb("click",(function(){return e.addItem()})),d.fc(19,"Create"),d.Jb(),d.Jb()),2&t&&(d.xb(13),d.Zb("ngModel",e.body.title),d.xb(4),d.Zb("ngModel",e.body.description))},directives:[i.l,i.u,i.t,i.g,i.d,i.e,i.f,i.m,i.j,i.o,i.p,i.n,i.z,r.f,r.d,r.e,i.s],styles:[""]}),t})()}];let p=(()=>{class t{}return t.\u0275mod=d.Fb({type:t}),t.\u0275inj=d.Eb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(h)],s.i]}),t})(),f=(()=>{class t{}return t.\u0275mod=d.Fb({type:t}),t.\u0275inj=d.Eb({factory:function(e){return new(e||t)},imports:[[n.b,r.a,i.v,p]]}),t})()}}]);